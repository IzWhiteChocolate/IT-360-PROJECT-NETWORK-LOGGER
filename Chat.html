<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WhereApp ‚Äî Home</title>
  <style>
    :root {
      --primary: #2563eb;
      --bg: #f3f4f6;
      --text-dark: #111827;
      --text-light: #6b7280;
      --card-bg: #fff;
      --user-msg: #dbeafe;
      --bot-msg: #e5e7eb;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      background: var(--primary);
      color: #fff;
      width: 100%;
      padding: 18px 0;
      text-align: center;
      font-size: 22px;
      font-weight: 600;
      letter-spacing: 0.3px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    main {
      margin-top: 60px;
      background: var(--card-bg);
      padding: 30px 40px;
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.08);
      max-width: 480px;
      width: 90%;
      text-align: center;
      transition: all 0.4s ease;
    }

    h1 {
      margin: 0 0 12px;
      font-size: 24px;
      color: var(--text-dark);
    }

    p.tagline {
      font-size: 16px;
      color: var(--text-light);
      margin: 0 0 30px;
    }

    .user-info {
      background: #eef2ff;
      border-radius: 8px;
      padding: 10px 14px;
      color: #1e3a8a;
      margin-bottom: 18px;
      font-size: 14px;
    }

    button {
      padding: 10px 16px;
      background: var(--primary);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #1d4ed8;
    }

    footer {
      margin-top: auto;
      padding: 20px 0;
      font-size: 13px;
      color: var(--text-light);
    }

    /* Chat area */
    #chatWindow {
      display: none;
      flex-direction: column;
      height: 400px;
      width: 100%;
    }

    .messages {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: #f9fafb;
      text-align: left;
      margin-bottom: 10px;
    }

    .msg {
      padding: 8px 12px;
      margin: 6px 0;
      border-radius: 10px;
      max-width: 75%;
      word-wrap: break-word;
    }

    .user {
      background: var(--user-msg);
      align-self: flex-end;
    }

    .bot {
      background: var(--bot-msg);
      align-self: flex-start;
    }

    .chat-input {
      display: flex;
      gap: 8px;
    }

    .chat-input input {
      flex: 1;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      outline: none;
    }

    .chat-input button {
      padding: 10px 14px;
    }
  </style>
</head>
<body>
  <header>WhereApp</header>

  <main id="homeView">
    <h1>Welcome to WhereApp!</h1>
    <p class="tagline">The only messaging app you'll ever need.</p>

    <div id="userInfo" class="user-info"></div>

    <button id="startChat">Start Chatting</button><br><br>
    <button id="logout">Log Out</button>
  </main>

  <main id="chatWindow">
    <div class="messages" id="messages">
      <div class="msg bot">Hey there üëã, welcome to WhereApp!</div>
      <div class="msg bot">Type a message below to start chatting.</div>
    </div>

    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="Type your message..." />
      <button id="sendBtn">Send</button>
    </div>

    <br>
    <button id="backHome">‚Üê Back to Home</button>
  </main>

  <footer>
    &copy; <span id="year"></span> WhereApp ‚Äî All Rights Reserved
  </footer>

  <script>
    const user = sessionStorage.getItem('msngr_user');
    const userBox = document.getElementById('userInfo');
    const year = new Date().getFullYear();
    document.getElementById('year').textContent = year;

    const homeView = document.getElementById('homeView');
    const chatWindow = document.getElementById('chatWindow');
    const messages = document.getElementById('messages');
    const input = document.getElementById('chatInput');

    // If user logged in
    if (user) {
      userBox.textContent = `Signed in as: ${user}`;
    } else {
      userBox.innerHTML = `
        You are not signed in.<br>
        <button id="goLogin" style="margin-top:10px; padding:8px 12px; border:none; background:#2563eb; color:white; border-radius:6px; cursor:pointer;">
          Go to Login
        </button>
      `;
      document.getElementById('goLogin').addEventListener('click', () => {
        window.location.href = 'login.html';
      });
    }

    // Show chat window
    document.getElementById('startChat').addEventListener('click', () => {
      homeView.style.display = 'none';
      chatWindow.style.display = 'flex';
    });

    // Back to home
    document.getElementById('backHome').addEventListener('click', () => {
      chatWindow.style.display = 'none';
      homeView.style.display = 'block';
    });

    // Send message
    document.getElementById('sendBtn').addEventListener('click', sendMessage);
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') sendMessage();
    });

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, 'user');
      input.value = '';
      setTimeout(() => addMessage(getBotReply(text), 'bot'), 600);
    }

    function addMessage(text, sender) {
      const msg = document.createElement('div');
      msg.classList.add('msg', sender);
      msg.textContent = text;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    function getBotReply(text) {
      const t = text.toLowerCase();
      if (t.includes('hello') || t.includes('hi')) return 'Hey there! How are you doing today?';
      if (t.includes('bye')) return 'Goodbye! üëã';
      if (t.includes('how')) return 'I‚Äôm just a demo bot, but I‚Äôm doing great!';
      return "That's interesting! Tell me more.";
    }

    document.getElementById('logout').addEventListener('click', () => {
      sessionStorage.removeItem('msngr_user');
      window.location.reload();
    });
  </script>
</body>
</html>
