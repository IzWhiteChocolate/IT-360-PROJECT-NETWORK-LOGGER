<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Communication Logger Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  body {
    background-color: #0e0f16;
    color: #e0e0e0;
    font-family: "Courier New", monospace;
    padding: 20px;
  }
  h1 {
    color: #00c8ff;
    text-align: center;
  }
  pre {
    background-color: #1a1c25;
    border-radius: 10px;
    padding: 15px;
    height: 75vh;
    overflow-y: scroll;
    white-space: pre-wrap;
  }
  .success { color: #00ff6e; }
  .error { color: #ff4d4d; }
  .info { color: #ffaa00; }
  .footer {
    text-align: center;
    font-size: 14px;
    color: #888;
    margin-top: 15px;
  }
</style>
</head>
<body>
<h1>ðŸ”’ Communication Logger Dashboard</h1>
<pre id="logArea">Loading logs...</pre>
<div class="footer">Auto-refresh every 3 seconds</div>

<script>
// Function to fetch and update log display
async function updateLog() {
  try {
    const res = await fetch('Communication_Logger/chain_of_custody.log?' + new Date().getTime());
    const text = await res.text();
    const lines = text.split('\n');
    const formatted = lines.map(line => {
      if (line.includes('[SUCCESS]')) return `<span class="success">${line}</span>`;
      if (line.includes('[ERROR]')) return `<span class="error">${line}</span>`;
      if (line.includes('[INFO]')) return `<span class="info">${line}</span>`;
      return line;
    }).join('\n');
    document.getElementById('logArea').innerHTML = formatted;
  } catch (err) {
    document.getElementById('logArea').textContent = 'Error loading log file.';
  }
}

// Refresh log view every 3 seconds
updateLog();
setInterval(updateLog, 3000);
</script>
</body>
</html>
